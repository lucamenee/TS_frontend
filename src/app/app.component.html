<h1> title </h1>

<form>
  <label for="departure">Partenza:</label>
  <select title="departure" [(ngModel)]="this.selectedDeparture" name="departure">
    <option *ngFor="let airport of airports | async" [value]="airport._id">
      {{ airport.city }}, {{ airport.airportName }} - {{ airport.IATA }}
    </option>
  </select>
  <br>

  <label for="destination">Destinazione:</label>
  <select title="destination" [(ngModel)]="this.selectedDestination" name="destination">
    <option *ngFor="let airport of airports | async" [value]="airport._id">
      {{ airport.city }}, {{ airport.airportName }} - {{ airport.IATA }}
    </option>
  </select>

  <br>

  <button type="button" (click)="getFlights()">Cerca</button>

</form>

<br><br>

<div *ngIf="flights | async as flightData; else loading">
  <h3>Direct Flights</h3>
  <div *ngFor="let flight of flightData.directFlights">
    {{ flight.departureDate | date: 'dd/MM/yyyy HH:mm' }} -> {{ flight.destinationDate | date: 'dd/MM/yyyy HH:mm' }}
  </div>

  <h3>Connected Flights</h3>
  <div *ngFor="let flight of flightData.connectingFlights">
    {{ flight.firstLeg.departureDate | date: 'dd/MM/yyyy HH:mm' }} -> {{ flight.secondLeg.destinationDate | date: 'dd/MM/yyyy HH:mm' }}
  </div>
</div>

<ng-template #loading>
  <p>Loading...</p>
</ng-template>